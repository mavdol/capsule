
package capsule:host;

interface api {

    variant task-error {
        invalid-name(string),
        invalid-config(string),
        invalid-args(string),
        internal-error(string),
    }

    schedule-task: func(
        task-name: string,
        args-json: string,
        config-json: string
    ) -> result<string, task-error>;
}

/// Export interface for running tasks - the Wasm component implements this
interface task-runner {
    /// Run a task with the given arguments, returns JSON result
    run: func(args-json: string) -> result<string, string>;
}

world capsule-agent {
    import api;
    export task-runner;
}
